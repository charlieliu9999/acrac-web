# ACRAC系统开发检查清单

## 第一阶段：基础功能（2-3周）

### 1.1 环境搭建检查项 ✓
- [ ] PostgreSQL 15安装完成
  - 验证：`psql --version` 显示版本 ≥ 15
  - 验证：能够创建数据库和用户
- [ ] pgvector扩展安装
  - 验证：`CREATE EXTENSION vector;` 执行成功
  - 验证：能创建vector类型字段
- [ ] Python环境配置
  - 验证：Python版本 ≥ 3.10
  - 验证：虚拟环境创建成功
  - 验证：requirements.txt所有依赖安装成功
- [ ] FastAPI项目结构
  - 验证：项目目录结构符合规范
  - 验证：`uvicorn main:app --reload` 启动成功
  - 验证：访问 http://localhost:8000/docs 显示API文档
- [ ] Vue3项目初始化
  - 验证：Node.js版本 ≥ 16
  - 验证：`npm run dev` 启动成功
  - 验证：访问 http://localhost:5173 显示欢迎页
- [ ] Docker环境
  - 验证：docker-compose.yml文件创建
  - 验证：`docker-compose up` 所有服务启动成功
  - 验证：容器间网络通信正常

### 1.2 数据模型设计检查项 ✓
- [ ] 数据库设计文档
  - 验证：ER图完整
  - 验证：字段类型和约束定义明确
- [ ] 表结构创建
  - 验证：panels表包含id, name_en, name_zh等字段
  - 验证：topics表正确关联panels表
  - 验证：variants表正确关联topics表
  - 验证：procedures表正确关联variants表
- [ ] 索引优化
  - 验证：主键索引自动创建
  - 验证：外键索引创建
  - 验证：查询字段索引创建
- [ ] 数据库迁移
  - 验证：Alembic配置完成
  - 验证：初始迁移脚本生成
  - 验证：`alembic upgrade head` 执行成功

### 1.3 数据导入功能检查项 ✓
- [ ] 文件上传接口
  - 验证：支持multipart/form-data
  - 验证：文件大小限制设置（如100MB）
  - 验证：文件类型验证（.csv, .xlsx）
- [ ] Excel解析功能
  - 验证：pandas读取Excel成功
  - 验证：列名映射正确
  - 验证：数据类型转换正确
- [ ] 数据验证
  - 验证：必填字段检查
  - 验证：数据格式验证（如评分范围0-10）
  - 验证：重复数据检测
- [ ] 批量导入
  - 验证：事务处理正确
  - 验证：错误回滚机制
  - 验证：导入进度实时更新
- [ ] 导入结果
  - 验证：成功导入ACR_final.csv所有数据
  - 验证：数据完整性检查通过
  - 验证：导入日志记录完整

### 1.4 基础查询API检查项 ✓
- [ ] API路由设计
  - 验证：/api/panels 返回所有Panel
  - 验证：/api/topics?panel_id=X 返回指定Panel的Topics
  - 验证：/api/variants?topic_id=X 返回指定Topic的Variants
  - 验证：/api/procedures?variant_id=X 返回指定Variant的Procedures
- [ ] 分页功能
  - 验证：page和page_size参数有效
  - 验证：返回total_count总数
  - 验证：返回has_next/has_prev状态
- [ ] 筛选功能
  - 验证：关键词搜索功能
  - 验证：多条件组合筛选
  - 验证：排序功能（如按rating排序）
- [ ] 响应格式
  - 验证：统一的JSON响应格式
  - 验证：错误处理和状态码规范
  - 验证：包含必要的元数据
- [ ] 性能测试
  - 验证：单个API响应时间 < 200ms
  - 验证：并发10个请求无错误
  - 验证：数据库连接池配置正确

### 1.5 前端基础界面检查项 ✓
- [ ] 项目结构
  - 验证：组件目录结构清晰
  - 验证：路由配置正确
  - 验证：状态管理（Pinia）集成
- [ ] 布局框架
  - 验证：顶部导航栏显示
  - 验证：侧边菜单功能正常
  - 验证：主内容区域响应式
- [ ] 数据浏览页面
  - 验证：四层数据结构展示正确
  - 验证：面包屑导航功能
  - 验证：数据加载状态提示
- [ ] 交互功能
  - 验证：点击Panel显示Topics
  - 验证：层级展开/收起动画流畅
  - 验证：数据详情弹窗显示
- [ ] UI规范
  - 验证：颜色主题一致
  - 验证：字体大小规范
  - 验证：按钮和表单样式统一

## 第二阶段：高级功能（3-4周）

### 2.1 向量检索实现检查项 ✓
- [ ] Embedding模型部署
  - 验证：选定模型（如text-embedding-ada-002或BGE）
  - 验证：模型服务API可访问
  - 验证：批量文本处理能力
- [ ] 向量化处理
  - 验证：文本预处理（清洗、分词）
  - 验证：向量维度正确（如768维）
  - 验证：向量归一化处理
- [ ] 数据库向量存储
  - 验证：vector字段创建成功
  - 验证：向量数据插入正确
  - 验证：现有数据向量化完成
- [ ] 检索功能
  - 验证：余弦相似度计算正确
  - 验证：Top-K结果返回
  - 验证：检索结果排序合理
- [ ] 性能优化
  - 验证：HNSW索引创建
  - 验证：检索响应时间 < 500ms
  - 验证：准确率 > 85%

### 2.2 中英文切换检查项 ✓
- [ ] i18n配置
  - 验证：vue-i18n安装配置
  - 验证：语言文件结构正确
  - 验证：默认语言设置
- [ ] 翻译文件
  - 验证：所有UI文本有翻译
  - 验证：中英文对照准确
  - 验证：动态文本处理
- [ ] 语言切换
  - 验证：切换按钮功能正常
  - 验证：语言偏好本地存储
  - 验证：切换无需刷新页面
- [ ] API适配
  - 验证：Accept-Language头处理
  - 验证：响应数据语言切换
  - 验证：错误信息多语言

### 2.3 数据字典管理检查项 ✓
- [ ] CRUD接口
  - 验证：创建字典项API
  - 验证：更新字典项API
  - 验证：删除字典项API（软删除）
  - 验证：查询字典项API
- [ ] 权限控制
  - 验证：角色定义（管理员、编辑、只读）
  - 验证：API权限验证
  - 验证：前端权限控制
- [ ] 审计功能
  - 验证：操作日志记录
  - 验证：变更历史查询
  - 验证：操作人员追踪
- [ ] 前端界面
  - 验证：字典列表展示
  - 验证：编辑表单验证
  - 验证：批量操作功能

### 2.4 导入导出功能检查项 ✓
- [ ] 文件格式支持
  - 验证：Excel (.xlsx) 导入导出
  - 验证：CSV 导入导出
  - 验证：JSON 导入导出
  - 验证：NDJSON 流式处理
- [ ] 模板功能
  - 验证：导出模板生成
  - 验证：模板字段说明
  - 验证：示例数据包含
- [ ] 异步处理
  - 验证：Celery任务队列配置
  - 验证：任务状态跟踪
  - 验证：进度实时更新
- [ ] 错误处理
  - 验证：数据验证错误提示
  - 验证：部分成功处理
  - 验证：错误日志下载

## 第三阶段：智能推理（4-5周）

### 3.1 Qwen3模型部署检查项 ✓
- [ ] 模型服务器
  - 验证：GPU资源分配（至少40GB显存）
  - 验证：模型文件下载完整
  - 验证：vLLM/TGI服务启动
- [ ] API封装
  - 验证：推理接口可访问
  - 验证：请求响应格式规范
  - 验证：超时和重试机制
- [ ] 负载均衡
  - 验证：多实例部署
  - 验证：请求分发策略
  - 验证：健康检查机制
- [ ] 性能指标
  - 验证：QPS > 10
  - 验证：P95延迟 < 3秒
  - 验证：GPU利用率监控

### 3.2 标准RAG推理检查项 ✓
- [ ] 检索模块
  - 验证：查询改写功能
  - 验证：多路召回策略
  - 验证：相关性重排序
- [ ] Prompt工程
  - 验证：系统提示词设计
  - 验证：Few-shot示例
  - 验证：上下文长度控制
- [ ] 生成质量
  - 验证：回答完整性
  - 验证：引用准确性
  - 验证：语言流畅性
- [ ] 评估指标
  - 验证：准确率 > 80%
  - 验证：召回率 > 75%
  - 验证：用户满意度 > 85%

### 3.3 规则优先推理检查项 ✓
- [ ] 规则引擎
  - 验证：规则DSL语法定义
  - 验证：规则解析器实现
  - 验证：规则执行引擎
- [ ] 规则库
  - 验证：初始规则导入
  - 验证：规则索引建立
  - 验证：规则冲突检测
- [ ] 融合策略
  - 验证：规则优先级设置
  - 验证：规则与RAG结果合并
  - 验证：置信度计算
- [ ] 效果评估
  - 验证：规则命中率 > 70%
  - 验证：融合准确率提升
  - 验证：推理时间优化

### 3.4 案例检索投票检查项 ✓
- [ ] 案例库构建
  - 验证：历史案例收集
  - 验证：案例标注质量
  - 验证：案例索引创建
- [ ] 相似检索
  - 验证：案例向量化
  - 验证：相似度算法
  - 验证：检索召回率
- [ ] 投票机制
  - 验证：投票权重设计
  - 验证：票数统计算法
  - 验证：结果聚合策略
- [ ] 质量指标
  - 验证：检索准确率 > 75%
  - 验证：投票一致性
  - 验证：结果可解释性

### 3.5 规则管理系统检查项 ✓
- [ ] 规则编辑器
  - 验证：可视化编辑界面
  - 验证：语法高亮和提示
  - 验证：实时验证功能
- [ ] 审核流程
  - 验证：提交审核功能
  - 验证：审核意见记录
  - 验证：审核状态流转
- [ ] 测试沙箱
  - 验证：独立测试环境
  - 验证：测试用例管理
  - 验证：效果对比分析
- [ ] 版本管理
  - 验证：版本号自动生成
  - 验证：版本对比功能
  - 验证：版本回滚机制

## 第四阶段：完善优化（2-3周）

### 4.1 失败处理机制检查项 ✓
- [ ] 失败收集
  - 验证：失败案例自动记录
  - 验证：失败原因分类
  - 验证：上下文信息完整
- [ ] 原因分析
  - 验证：自动分析算法
  - 验证：人工标注界面
  - 验证：分析报告生成
- [ ] 规则生成
  - 验证：规则提案模板
  - 验证：自动填充功能
  - 验证：提案质量检查
- [ ] 闭环验证
  - 验证：100%失败记录
  - 验证：规则转化率 > 30%
  - 验证：改进效果跟踪

### 4.2 性能优化检查项 ✓
- [ ] 数据库优化
  - 验证：慢查询日志分析
  - 验证：索引优化完成
  - 验证：查询计划优化
- [ ] 缓存策略
  - 验证：Redis缓存配置
  - 验证：缓存命中率 > 80%
  - 验证：缓存更新策略
- [ ] API优化
  - 验证：响应压缩启用
  - 验证：批量请求支持
  - 验证：连接池优化
- [ ] 前端优化
  - 验证：代码分割实施
  - 验证：懒加载配置
  - 验证：资源压缩
- [ ] 性能提升
  - 验证：响应时间降低50%
  - 验证：吞吐量提升100%
  - 验证：资源使用优化

### 4.3 监控和日志检查项 ✓
- [ ] 监控配置
  - 验证：Prometheus采集配置
  - 验证：自定义指标定义
  - 验证：告警规则设置
- [ ] Grafana面板
  - 验证：系统概览面板
  - 验证：API性能面板
  - 验证：业务指标面板
- [ ] 日志系统
  - 验证：ELK Stack部署
  - 验证：日志格式统一
  - 验证：日志级别配置
- [ ] 告警机制
  - 验证：告警通道配置
  - 验证：告警测试通过
  - 验证：值班响应流程
- [ ] 覆盖率
  - 验证：100%关键指标监控
  - 验证：日志查询便捷
  - 验证：问题定位快速

### 4.4 部署和文档检查项 ✓
- [ ] 部署脚本
  - 验证：一键部署脚本
  - 验证：环境变量配置
  - 验证：健康检查脚本
- [ ] 运维文档
  - 验证：部署步骤详细
  - 验证：故障处理指南
  - 验证：性能调优建议
- [ ] 用户手册
  - 验证：功能说明完整
  - 验证：操作截图清晰
  - 验证：常见问题解答
- [ ] API文档
  - 验证：接口说明完整
  - 验证：请求示例准确
  - 验证：错误码说明
- [ ] 交付验证
  - 验证：一键部署成功
  - 验证：文档评审通过
  - 验证：培训材料完备

## 质量门禁标准

### 代码质量
- [ ] 单元测试覆盖率 > 80%
- [ ] 代码规范检查通过（Pylint/ESLint）
- [ ] 无严重安全漏洞
- [ ] 代码评审完成

### 功能完整性
- [ ] 所有需求功能实现
- [ ] 集成测试全部通过
- [ ] 用户验收测试通过
- [ ] 无P0/P1级别缺陷

### 性能指标
- [ ] 查询响应 < 200ms
- [ ] 推理响应 < 3s
- [ ] 系统可用率 > 99.5%
- [ ] 并发用户 > 100

### 安全合规
- [ ] 数据加密存储
- [ ] 访问控制完善
- [ ] 审计日志完整
- [ ] 隐私保护措施

---
*检查清单版本：1.0*
*最后更新：2024年1月*
*负责人：__________*
